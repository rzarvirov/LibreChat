{"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { z } from 'zod';\nimport axios from 'axios';\nimport { URL } from 'url';\nimport crypto from 'crypto';\nimport { load } from 'js-yaml';\nimport { Tools, AuthTypeEnum, AuthorizationTypeEnum } from './types/assistants';\nexport function sha1(input) {\n    return crypto.createHash('sha1').update(input).digest('hex');\n}\nexport function createURL(domain, path) {\n    var cleanDomain = domain.replace(/\\/$/, '');\n    var cleanPath = path.replace(/^\\//, '');\n    var fullURL = \"\".concat(cleanDomain, \"/\").concat(cleanPath);\n    return new URL(fullURL).toString();\n}\nvar schemaTypeHandlers = {\n    string: function (schema) {\n        if (schema.enum) {\n            return z.enum(schema.enum);\n        }\n        var stringSchema = z.string();\n        if (schema.minLength !== undefined) {\n            stringSchema = stringSchema.min(schema.minLength);\n        }\n        if (schema.maxLength !== undefined) {\n            stringSchema = stringSchema.max(schema.maxLength);\n        }\n        return stringSchema;\n    },\n    number: function (schema) {\n        var numberSchema = z.number();\n        if (schema.minimum !== undefined) {\n            numberSchema = numberSchema.min(schema.minimum);\n        }\n        if (schema.maximum !== undefined) {\n            numberSchema = numberSchema.max(schema.maximum);\n        }\n        return numberSchema;\n    },\n    integer: function (schema) { return schemaTypeHandlers.number(schema).int(); },\n    boolean: function () { return z.boolean(); },\n    array: function (schema) {\n        if (schema.items) {\n            var zodSchema = openAPISchemaToZod(schema.items);\n            if (zodSchema) {\n                return z.array(zodSchema);\n            }\n            return z.array(z.unknown());\n        }\n        return z.array(z.unknown());\n    },\n    object: function (schema) {\n        var shape = {};\n        if (schema.properties) {\n            Object.entries(schema.properties).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                var zodSchema = openAPISchemaToZod(value);\n                shape[key] = zodSchema || z.unknown();\n                if (schema.required && schema.required.includes(key)) {\n                    shape[key] = shape[key].describe(value.description || '');\n                }\n                else {\n                    shape[key] = shape[key].optional().describe(value.description || '');\n                }\n            });\n        }\n        return z.object(shape);\n    },\n};\nfunction openAPISchemaToZod(schema) {\n    if (schema.type === 'object' && Object.keys(schema.properties || {}).length === 0) {\n        return undefined;\n    }\n    var handler = schemaTypeHandlers[schema.type] || (function () { return z.unknown(); });\n    return handler(schema);\n}\nvar FunctionSignature = /** @class */ (function () {\n    function FunctionSignature(name, description, parameters) {\n        this.name = name;\n        this.description = description;\n        this.parameters = parameters;\n    }\n    FunctionSignature.prototype.toObjectTool = function () {\n        return {\n            type: Tools.function,\n            function: {\n                name: this.name,\n                description: this.description,\n                parameters: this.parameters,\n            },\n        };\n    };\n    return FunctionSignature;\n}());\nexport { FunctionSignature };\nvar RequestConfig = /** @class */ (function () {\n    function RequestConfig(domain, basePath, method, operation, isConsequential, contentType) {\n        this.domain = domain;\n        this.basePath = basePath;\n        this.method = method;\n        this.operation = operation;\n        this.isConsequential = isConsequential;\n        this.contentType = contentType;\n    }\n    return RequestConfig;\n}());\nvar RequestExecutor = /** @class */ (function () {\n    function RequestExecutor(config) {\n        this.config = config;\n        this.authHeaders = {};\n        this.path = config.basePath;\n    }\n    RequestExecutor.prototype.setParams = function (params) {\n        this.operationHash = sha1(JSON.stringify(params));\n        this.params = Object.assign({}, params);\n        for (var _i = 0, _a = Object.entries(params); _i < _a.length; _i++) {\n            var _b = _a[_i], key = _b[0], value = _b[1];\n            var paramPattern = \"{\".concat(key, \"}\");\n            if (this.path.includes(paramPattern)) {\n                this.path = this.path.replace(paramPattern, encodeURIComponent(value));\n                delete this.params[key];\n            }\n        }\n        return this;\n    };\n    RequestExecutor.prototype.setAuth = function (metadata) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var _b, type, \n            /* API Key */\n            authorization_type, custom_auth_header, \n            /* OAuth */\n            authorization_url, client_url, scope, token_exchange_method, \n            /* API Key */\n            api_key, \n            /* OAuth */\n            oauth_client_id, oauth_client_secret, isApiKey, isOAuth, basicToken, authToken, tokenResponse;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (!metadata.auth) {\n                            return [2 /*return*/, this];\n                        }\n                        _b = metadata.auth, type = _b.type, authorization_type = _b.authorization_type, custom_auth_header = _b.custom_auth_header, authorization_url = _b.authorization_url, client_url = _b.client_url, scope = _b.scope, token_exchange_method = _b.token_exchange_method;\n                        api_key = metadata.api_key, oauth_client_id = metadata.oauth_client_id, oauth_client_secret = metadata.oauth_client_secret;\n                        isApiKey = api_key != null && api_key.length > 0 && type === AuthTypeEnum.ServiceHttp;\n                        isOAuth = !!(oauth_client_id != null &&\n                            oauth_client_id &&\n                            oauth_client_secret != null &&\n                            oauth_client_secret &&\n                            type === AuthTypeEnum.OAuth &&\n                            authorization_url != null &&\n                            authorization_url &&\n                            client_url != null &&\n                            client_url &&\n                            scope != null &&\n                            scope &&\n                            token_exchange_method);\n                        if (!(isApiKey && authorization_type === AuthorizationTypeEnum.Basic)) return [3 /*break*/, 1];\n                        basicToken = Buffer.from(api_key).toString('base64');\n                        this.authHeaders['Authorization'] = \"Basic \".concat(basicToken);\n                        return [3 /*break*/, 6];\n                    case 1:\n                        if (!(isApiKey && authorization_type === AuthorizationTypeEnum.Bearer)) return [3 /*break*/, 2];\n                        this.authHeaders['Authorization'] = \"Bearer \".concat(api_key);\n                        return [3 /*break*/, 6];\n                    case 2:\n                        if (!(isApiKey &&\n                            authorization_type === AuthorizationTypeEnum.Custom &&\n                            custom_auth_header != null &&\n                            custom_auth_header)) return [3 /*break*/, 3];\n                        this.authHeaders[custom_auth_header] = api_key;\n                        return [3 /*break*/, 6];\n                    case 3:\n                        if (!isOAuth) return [3 /*break*/, 6];\n                        authToken = (_a = this.authToken) !== null && _a !== void 0 ? _a : '';\n                        if (!!authToken) return [3 /*break*/, 5];\n                        return [4 /*yield*/, axios.post(client_url, {\n                                client_id: oauth_client_id,\n                                client_secret: oauth_client_secret,\n                                scope: scope,\n                                grant_type: 'client_credentials',\n                            }, {\n                                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n                            })];\n                    case 4:\n                        tokenResponse = _c.sent();\n                        this.authToken = tokenResponse.data.access_token;\n                        _c.label = 5;\n                    case 5:\n                        this.authHeaders['Authorization'] = \"Bearer \".concat(this.authToken);\n                        _c.label = 6;\n                    case 6: return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    RequestExecutor.prototype.execute = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var url, headers, method;\n            return __generator(this, function (_a) {\n                url = createURL(this.config.domain, this.path);\n                headers = __assign(__assign({}, this.authHeaders), { 'Content-Type': this.config.contentType });\n                method = this.config.method.toLowerCase();\n                if (method === 'get') {\n                    return [2 /*return*/, axios.get(url, { headers: headers, params: this.params })];\n                }\n                else if (method === 'post') {\n                    return [2 /*return*/, axios.post(url, this.params, { headers: headers })];\n                }\n                else if (method === 'put') {\n                    return [2 /*return*/, axios.put(url, this.params, { headers: headers })];\n                }\n                else if (method === 'delete') {\n                    return [2 /*return*/, axios.delete(url, { headers: headers, data: this.params })];\n                }\n                else if (method === 'patch') {\n                    return [2 /*return*/, axios.patch(url, this.params, { headers: headers })];\n                }\n                else {\n                    throw new Error(\"Unsupported HTTP method: \".concat(method));\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    RequestExecutor.prototype.getConfig = function () {\n        return this.config;\n    };\n    return RequestExecutor;\n}());\nvar ActionRequest = /** @class */ (function () {\n    function ActionRequest(domain, path, method, operation, isConsequential, contentType) {\n        this.config = new RequestConfig(domain, path, method, operation, isConsequential, contentType);\n    }\n    Object.defineProperty(ActionRequest.prototype, \"domain\", {\n        // Add getters to maintain backward compatibility\n        get: function () {\n            return this.config.domain;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"path\", {\n        get: function () {\n            return this.config.basePath;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"method\", {\n        get: function () {\n            return this.config.method;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"operation\", {\n        get: function () {\n            return this.config.operation;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"isConsequential\", {\n        get: function () {\n            return this.config.isConsequential;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ActionRequest.prototype, \"contentType\", {\n        get: function () {\n            return this.config.contentType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ActionRequest.prototype.createExecutor = function () {\n        return new RequestExecutor(this.config);\n    };\n    // Maintain backward compatibility by delegating to a new executor\n    ActionRequest.prototype.setParams = function (params) {\n        var executor = this.createExecutor();\n        executor.setParams(params);\n        return executor;\n    };\n    ActionRequest.prototype.setAuth = function (metadata) {\n        return __awaiter(this, void 0, void 0, function () {\n            var executor;\n            return __generator(this, function (_a) {\n                executor = this.createExecutor();\n                return [2 /*return*/, executor.setAuth(metadata)];\n            });\n        });\n    };\n    ActionRequest.prototype.execute = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var executor;\n            return __generator(this, function (_a) {\n                executor = this.createExecutor();\n                return [2 /*return*/, executor.execute()];\n            });\n        });\n    };\n    return ActionRequest;\n}());\nexport { ActionRequest };\nexport function resolveRef(schema, components) {\n    var _a;\n    if ('$ref' in schema && components) {\n        var refPath = schema.$ref.replace(/^#\\/components\\/schemas\\//, '');\n        var resolvedSchema = (_a = components.schemas) === null || _a === void 0 ? void 0 : _a[refPath];\n        if (!resolvedSchema) {\n            throw new Error(\"Reference \".concat(schema.$ref, \" not found\"));\n        }\n        return resolveRef(resolvedSchema, components);\n    }\n    return schema;\n}\nfunction sanitizeOperationId(input) {\n    return input.replace(/[^a-zA-Z0-9_-]/g, '');\n}\n/** Function to convert OpenAPI spec to function signatures and request builders */\nexport function openapiToFunction(openapiSpec, generateZodSchemas) {\n    var _a;\n    var _b, _c, _d, _e, _f;\n    if (generateZodSchemas === void 0) { generateZodSchemas = false; }\n    var functionSignatures = [];\n    var requestBuilders = {};\n    var zodSchemas = {};\n    var baseUrl = (_d = (_c = (_b = openapiSpec.servers) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.url) !== null && _d !== void 0 ? _d : '';\n    // Iterate over each path and method in the OpenAPI spec\n    for (var _i = 0, _g = Object.entries(openapiSpec.paths); _i < _g.length; _i++) {\n        var _h = _g[_i], path = _h[0], methods = _h[1];\n        for (var _j = 0, _k = Object.entries(methods); _j < _k.length; _j++) {\n            var _l = _k[_j], method = _l[0], operation = _l[1];\n            var operationObj = operation;\n            // Operation ID is used as the function name\n            var defaultOperationId = \"\".concat(method, \"_\").concat(path);\n            var operationId = operationObj.operationId || sanitizeOperationId(defaultOperationId);\n            var description = operationObj.summary || operationObj.description || '';\n            var parametersSchema = {\n                type: 'object',\n                properties: {},\n                required: [],\n            };\n            if (operationObj.parameters) {\n                for (var _m = 0, _o = operationObj.parameters; _m < _o.length; _m++) {\n                    var param = _o[_m];\n                    var paramObj = param;\n                    var resolvedSchema = resolveRef(__assign({}, paramObj.schema), openapiSpec.components);\n                    parametersSchema.properties[paramObj.name] = resolvedSchema;\n                    if (paramObj.required === true) {\n                        parametersSchema.required.push(paramObj.name);\n                    }\n                }\n            }\n            if (operationObj.requestBody) {\n                var requestBody = operationObj.requestBody;\n                var content = requestBody.content;\n                var contentType = Object.keys(content !== null && content !== void 0 ? content : {})[0];\n                var schema = (_e = content === null || content === void 0 ? void 0 : content[contentType]) === null || _e === void 0 ? void 0 : _e.schema;\n                var resolvedSchema = resolveRef(schema, openapiSpec.components);\n                parametersSchema.properties = __assign(__assign({}, parametersSchema.properties), resolvedSchema.properties);\n                if (resolvedSchema.required) {\n                    (_a = parametersSchema.required).push.apply(_a, resolvedSchema.required);\n                }\n            }\n            var functionSignature = new FunctionSignature(operationId, description, parametersSchema);\n            functionSignatures.push(functionSignature);\n            var actionRequest = new ActionRequest(baseUrl, path, method, operationId, !!((_f = operationObj['x-openai-isConsequential']) !== null && _f !== void 0 ? _f : false), // Custom extension for consequential actions\n            operationObj.requestBody ? 'application/json' : 'application/x-www-form-urlencoded');\n            requestBuilders[operationId] = actionRequest;\n            if (generateZodSchemas && Object.keys(parametersSchema.properties).length > 0) {\n                var schema = openAPISchemaToZod(parametersSchema);\n                if (schema) {\n                    zodSchemas[operationId] = schema;\n                }\n            }\n        }\n    }\n    return { functionSignatures: functionSignatures, requestBuilders: requestBuilders, zodSchemas: zodSchemas };\n}\nexport function validateAndParseOpenAPISpec(specString) {\n    var _a;\n    try {\n        var parsedSpec = void 0;\n        try {\n            parsedSpec = JSON.parse(specString);\n        }\n        catch (_b) {\n            parsedSpec = load(specString);\n        }\n        // Check for servers\n        if (!parsedSpec.servers ||\n            !Array.isArray(parsedSpec.servers) ||\n            parsedSpec.servers.length === 0) {\n            return { status: false, message: 'Could not find a valid URL in `servers`' };\n        }\n        if (!parsedSpec.servers[0].url) {\n            return { status: false, message: 'Could not find a valid URL in `servers`' };\n        }\n        // Check for paths\n        var paths = parsedSpec.paths;\n        if (!paths || typeof paths !== 'object' || Object.keys(paths).length === 0) {\n            return { status: false, message: 'No paths found in the OpenAPI spec.' };\n        }\n        var components = ((_a = parsedSpec.components) === null || _a === void 0 ? void 0 : _a.schemas) || {};\n        var messages = [];\n        for (var _i = 0, _c = Object.entries(paths); _i < _c.length; _i++) {\n            var _d = _c[_i], path = _d[0], methods = _d[1];\n            for (var _e = 0, _f = Object.entries(methods); _e < _f.length; _e++) {\n                var _g = _f[_e], httpMethod = _g[0], operation = _g[1];\n                // Ensure operation is a valid operation object\n                var responses = operation.responses;\n                if (typeof operation === 'object' && responses) {\n                    for (var _h = 0, _j = Object.entries(responses); _h < _j.length; _h++) {\n                        var _k = _j[_h], statusCode = _k[0], response = _k[1];\n                        var content = response.content;\n                        if (content && content['application/json'] && content['application/json'].schema) {\n                            var schema = content['application/json'].schema;\n                            if ('$ref' in schema && typeof schema.$ref === 'string') {\n                                var refName = schema.$ref.split('/').pop();\n                                if (refName && !components[refName]) {\n                                    messages.push(\"In context=('paths', '\".concat(path, \"', '\").concat(httpMethod, \"', '\").concat(statusCode, \"', 'response', 'content', 'application/json', 'schema'), reference to unknown component \").concat(refName, \"; using empty schema\"));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return {\n            status: true,\n            message: messages.join('\\n') || 'OpenAPI spec is valid.',\n            spec: parsedSpec,\n        };\n    }\n    catch (error) {\n        return { status: false, message: 'Error parsing OpenAPI spec.' };\n    }\n}\n//# sourceMappingURL=actions.js.map","references":["/Users/romanzarvirov/aibuddy/LibreChat/node_modules/zod/index.d.ts","/Users/romanzarvirov/aibuddy/LibreChat/node_modules/axios/index.d.ts","/Users/romanzarvirov/aibuddy/LibreChat/node_modules/url/url.js","/Users/romanzarvirov/aibuddy/LibreChat/node_modules/@types/js-yaml/index.d.ts","/Users/romanzarvirov/aibuddy/LibreChat/packages/data-provider/src/types/assistants.ts","/Users/romanzarvirov/aibuddy/LibreChat/node_modules/openapi-types/dist/index.d.ts","/Users/romanzarvirov/aibuddy/LibreChat/packages/data-provider/src/types/assistants.ts"],"map":"{\"version\":3,\"file\":\"actions.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/actions.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/romanzarvirov/aibuddy/LibreChat/packages/data-provider/dist/types/actions.d.ts","writeByteOrderMark":false,"text":"import { z } from 'zod';\nimport type { FunctionTool, Schema, Reference, ActionMetadata } from './types/assistants';\nimport type { OpenAPIV3 } from 'openapi-types';\nimport { AuthorizationTypeEnum } from './types/assistants';\nexport type ParametersSchema = {\n    type: string;\n    properties: Record<string, Reference | Schema>;\n    required: string[];\n};\nexport type OpenAPISchema = OpenAPIV3.SchemaObject & ParametersSchema & {\n    items?: OpenAPIV3.ReferenceObject | OpenAPIV3.SchemaObject;\n};\nexport type ApiKeyCredentials = {\n    api_key: string;\n    custom_auth_header?: string;\n    authorization_type?: AuthorizationTypeEnum;\n};\nexport type OAuthCredentials = {\n    tokenUrl: string;\n    clientId: string;\n    clientSecret: string;\n    scope: string;\n};\nexport type Credentials = ApiKeyCredentials | OAuthCredentials;\ntype MediaTypeObject = undefined | {\n    [media: string]: OpenAPIV3.MediaTypeObject | undefined;\n};\ntype RequestBodyObject = Omit<OpenAPIV3.RequestBodyObject, 'content'> & {\n    content: MediaTypeObject;\n};\nexport declare function sha1(input: string): string;\nexport declare function createURL(domain: string, path: string): string;\nexport declare class FunctionSignature {\n    name: string;\n    description: string;\n    parameters: ParametersSchema;\n    constructor(name: string, description: string, parameters: ParametersSchema);\n    toObjectTool(): FunctionTool;\n}\ndeclare class RequestConfig {\n    readonly domain: string;\n    readonly basePath: string;\n    readonly method: string;\n    readonly operation: string;\n    readonly isConsequential: boolean;\n    readonly contentType: string;\n    constructor(domain: string, basePath: string, method: string, operation: string, isConsequential: boolean, contentType: string);\n}\ndeclare class RequestExecutor {\n    private config;\n    path: string;\n    params?: object;\n    private operationHash?;\n    private authHeaders;\n    private authToken?;\n    constructor(config: RequestConfig);\n    setParams(params: object): this;\n    setAuth(metadata: ActionMetadata): Promise<this>;\n    execute(): Promise<import(\"axios\").AxiosResponse<any, any>>;\n    getConfig(): RequestConfig;\n}\nexport declare class ActionRequest {\n    private config;\n    constructor(domain: string, path: string, method: string, operation: string, isConsequential: boolean, contentType: string);\n    get domain(): string;\n    get path(): string;\n    get method(): string;\n    get operation(): string;\n    get isConsequential(): boolean;\n    get contentType(): string;\n    createExecutor(): RequestExecutor;\n    setParams(params: object): RequestExecutor;\n    setAuth(metadata: ActionMetadata): Promise<RequestExecutor>;\n    execute(): Promise<import(\"axios\").AxiosResponse<any, any>>;\n}\nexport declare function resolveRef(schema: OpenAPIV3.SchemaObject | OpenAPIV3.ReferenceObject | RequestBodyObject, components?: OpenAPIV3.ComponentsObject): OpenAPIV3.SchemaObject;\n/** Function to convert OpenAPI spec to function signatures and request builders */\nexport declare function openapiToFunction(openapiSpec: OpenAPIV3.Document, generateZodSchemas?: boolean): {\n    functionSignatures: FunctionSignature[];\n    requestBuilders: Record<string, ActionRequest>;\n    zodSchemas?: Record<string, z.ZodTypeAny>;\n};\nexport type ValidationResult = {\n    status: boolean;\n    message: string;\n    spec?: OpenAPIV3.Document;\n};\nexport declare function validateAndParseOpenAPISpec(specString: string): ValidationResult;\nexport {};\n"}}
